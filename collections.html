<head>
  <meta charset="utf-8">
  <meta name="description" content="Introduction to JavaScript collections.">
  <meta name="author" content="Elucian Moise">
  <meta name="keywords" content="javascript, associative, array, list, collection">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Website title -->
  <title>JS Collections</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
  <!-- Icon -->
  <link rel="icon" type="image/png"  href="../images/favicon.ico">
  <!-- Prism Highlighter -->
  <link rel="stylesheet" href="../prism.css">
  <script src="../prism.js"></script>
  <!-- custom css -->
  <link rel="stylesheet" href="../sage.css">
  </head>
<body>

<div class="container">

<!-- header -->
<div class="row">
    <div class="col">
        <a href="https://sagecode.net"><img src="../images/sage-logo.svg" alt="Sage-Code Laboratory" height="80"/></a>
    </div>
    <div class="col bottom-right">
        <a href="index.html#js-bookmark">index</a>&lt;--
    </div>
</div>


<hr>

<h1>JavaScript Collections</h1>

<div class="alert alert-secondary shadow-sm">Collections are groups of multiple values usually of the same type, identified by a key.
The key must be a number or a string, while the value can be any data type: numeric, string or object.
Collection pairs are ordered by key that are unique.</div>

<h4>Bookmarks</h4>

<ul>
<li><a href="#arrays">JavaScript arrays</a></li>
<ul>
<li><a href="#literals">Array literals</a></li>
<li><a href="#empty">Empty array</a></li>
<li><a href="#slice">Slicing arrays</a></li>
<li><a href="#splice">Splicing arrays</a></li>
</ul>
<li><a href="#object">Array as object</a></li>
<li><a href="#associative">Associative arrays</a></li>
<li><a href="#set">Set collection</a></li>
<li><a href="#map">Map collection</a></li>
<li><a href="#spread">Spread operator</a></li>
<li><a href="#rest">Rest operator</a></li>
</ul>

<h2><a id="arrays"/>JavaScript Arrays</h2>

<p>
JavaScript arrays are ordered collection of multiple elements of same data type. An array holds all the elements under a single name. You can access each element by using its numeric index enclosed in square brackets. The index starts from [0] to [n-1] where n = total number of elements.
</p>

<p><b>Example</b><p>

<pre><code class="language-javascript"> let numbers = [1,2,3,4,5,9,7,8,9,10]</code></pre>
<br>

<div align="center">
  <img src="../images/array.jpg" alt="array" srcset="../images/array.svg" width="520"
  class="img-fluid protect rounded shadow border">
  <p>Array Elements</p>
</div>

<h3><a id="literals">Array Literals</h3>

<p>An array literal is a list of values separated by comma and enclosed in square brackets like: numbers = [1,2,3...].
Element access notation is based on array name followed by index enclosed in square brackets like: numbers[x].
The array literal is a constant that is stored with the code similar to a string or a number.
</p>

<h4>Example:</h4>
<pre><code class="language-javascript">//Let's create an array using array literal notation
var bike = ['road', 'mountain', 'cruiser'];

//update the third item in the array
bike[2] = 'hybrid';

//print the third item in the array
document.write(bike[2]); // hybrid

//Let's create an array using array constructor
var moreBikes = new Array(
 'road',
 'mountain',
 'cruiser');

//update the third item in the array
moreBikes[2] = 'hybrid';

//print the third item in the array
document.write(moreBikes[2]); // hybrid
</code></pre>

<p>In previous example an array is declared in two distinct ways.</p>
<ol>
<li>we can define an array using type inference from a literal.</li>
<li>we can define an array using keyword&nbsp;<em><b>"new"&nbsp;</b></em>follow by the constructor "<b><em>Array(&hellip;)"</em></b>.</li>
</ol>

<h3><a id="empty"/>Empty Array</h3>
<p>To create an empty array:
<code class="language-javascript">var fruits = []</code></p>

<h3>Push()</h3>
<p>To add elements into an array we can use array method push().</p>

<pre><code class="language-javascript">fruits.push("Banana");
fruits.push("Orange");
fruits.push("Apple");
</code></pre>

<h3>Pop()</h3>
<p>To remove last element from array we can use method pop();</p>

<pre><code class="language-javascript">class="lang:js decode:true">fruits.pop(); // =&gt; Apple
// fruits = ["Banana", "Orange"]
</code></pre>

<h3>Shift()</h3>
<p>To remove first element from array we can use method shift();</p>

<pre><code class="language-javascript">fruits.shift(); // =&gt; "Banana"
// fruits = ["Orange"]
</code></pre>

<h3>Unshift()</h3>
<p>To add element as first element in array we can use method unshift();</p>

<pre><code class="language-javascript">fruits.unshift("Mango");
// fruits = ["Mango", "Orange"]
</code></pre>

<h3><a id="slice"/>Slice()</h3>

<p>The <b>slice(first, last)</b> method slices out a piece of an array
into a new array but the old array remain unchanged.
To change the old array we use <b>splice()</b> method.</p>

<pre><code class="language-javascript">var fruits = ["Banana", "Orange", "Lemon", "Apple"];
var citrus = fruits.slice(1, 3);
console.log(citrus) // citrus = ["Orange", "Lemon"]
console.log(fruits) // citrus = ["Banana", "Orange", "Lemon", "Apple"]
</code></pre>

<br>
<div align="center">
  <img src="img/slice.svg" alt="array" width="400" class="img-fluid protect rounded shadow border" >
  <p>Slice an Array</p>
</div>


<h3><a id="splice"/>Splice()</h3>
<p>The method&nbsp;<b>splice(start_position, how_many)</b>&nbsp;is removing elements from array.</p>

<pre><code class="language-javascript">fruits = ["Banana", "Orange", "Lemon", "Apple"];
citrus = fruits.splice(1, 2);
console.log(citrus)// citrus =  ["Orange", "Lemon"]
console.log(fruits)// fruits =&nbsp; ["Banana", "Apple"];
</code></pre>

<br>
<div align="center">
  <img src="img/splice.svg" alt="array"  width="400" class="img-fluid protect rounded shadow border" >
  <p>Splice an Array</p>
</div>


<p><b>Note:</b>&nbsp;Splice() method can be used to insert elements into array using a third parameter.</p>
<p><b>splice(start_position, how_many, new_elements)</b></p>
<pre><code class="language-javascript">var fruits = ["Banana", "Orange", "Lemon", "Apple"];
fruits.splice(2, 0, "Mango");
// fruits =&nbsp; ["Banana", "Orange", "Mango", "Lemon", "Apple"]
</code></pre>

<h3>More functions:</h3>

<p>For details about all array functions check external Mozilla documentation:</p>

<table class="table table-striped table-bordered">
<tbody>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td><a href="https://www.w3schools.com/jsref/jsref_concat_array.asp">c</a>oncat()</td>
<td>Joins two or more arrays, and returns a copy of the joined arrays</td>
</tr>
<tr>
<td>copyWithin()</td>
<td>Copies array elements within the array, to and from specified positions</td>
</tr>
<tr>
<td>entries()</td>
<td>Returns a key/value pair Array Iteration Object</td>
</tr>
<tr>
<td>every()</td>
<td>Checks if every element in an array pass a test</td>
</tr>
<tr>
<td>fill()</td>
<td>Fill the elements in an array with a static value</td>
</tr>
<tr>
<td>filter()</td>
<td>Creates a new array with every element in an array that pass a test</td>
</tr>
<tr>
<td>find()</td>
<td>Returns the value of the first element in an array that pass a test</td>
</tr>
<tr>
<td>findIndex()</td>
<td>Returns the index of the first element in an array that pass a test</td>
</tr>
<tr>
<td>forEach()</td>
<td>Calls a function for each array element</td>
</tr>
<tr>
<td>from()</td>
<td>Creates an array from an object</td>
</tr>
<tr>
<td>includes()</td>
<td>Check if an array contains the specified element</td>
</tr>
<tr>
<td>indexOf()</td>
<td>Search the array for an element and returns its position</td>
</tr>
<tr>
<td>isArray()</td>
<td>Checks whether an object is an array</td>
</tr>
<tr>
<td>join()</td>
<td>Joins all elements of an array into a string</td>
</tr>
<tr>
<td>keys()</td>
<td>Returns a Array Iteration Object, containing the keys of the original array</td>
</tr>
<tr>
<td>lastIndexOf()</td>
<td>Search the array for an element, starting at the end, and returns its position</td>
</tr>
<tr>
<td>map()</td>
<td>Creates a new array with the result of calling a function for each array element</td>
</tr>
<tr>
<td>pop()</td>
<td>Removes the last element of an array, and returns that element</td>
</tr>
<tr>
<td>push()</td>
<td>Adds new elements to the end of an array, and returns the new length</td>
</tr>
<tr>
<td>reduce()</td>
<td>Reduce the values of an array to a single value (going left-to-right)</td>
</tr>
<tr>
<td>reduceRight()</td>
<td>Reduce the values of an array to a single value (going right-to-left)</td>
</tr>
<tr>
<td>reverse()</td>
<td>Reverses the order of the elements in an array</td>
</tr>
<tr>
<td>shift()</td>
<td>Removes the first element of an array, and returns that element</td>
</tr>
<tr>
<td>slice()</td>
<td>Selects a part of an array, and returns the new array</td>
</tr>
<tr>
<td>some()</td>
<td>Checks if any of the elements in an array pass a test</td>
</tr>
<tr>
<td>sort()</td>
<td>Sorts the elements of an array</td>
</tr>
<tr>
<td>splice()</td>
<td>Adds/Removes elements from an array</td>
</tr>
<tr>
<td>toString()</td>
<td>Converts an array to a string, and returns the result</td>
</tr>
<tr>
<td>unshift()</td>
<td>Adds new elements to the beginning of an array, and returns the new length</td>
</tr>
<tr>
<td>valueOf()</td>
<td>Returns the primitive value of an array</td>
</tr>
</tbody>
</table>

<p><b>Note:</b>&nbsp; In future examples we will use some of these functions.</p>

<h2>Using console</h2>

<p>You can use JavaScript console for debugging purposes.</p>

<h4>Example:</h4>

<pre><code class="language-javascript">var bike = ['road', 'mountain', 'cruiser'];
var test = bike.shift();
console.log(test)
console.log(bike)
</code></pre>

<p><b>Output:</b></p>

<pre><code class="language-output">"road"
(2) ["mountain" ,"cruiser"]</code></pre>

<h2>Destructuring</h2>
<p>The destructuring assignment syntax is a JavaScript expression that makes it
possible to unpack values from arrays, or properties from objects,
into distinct variables, using array like notation [...]. In next example you can see the syntax used to define two variables and assign first two values from array.
This is how destructuring array works: "by position".</p>

<h4>Example:</h4>

<pre><code class="language-javascript">/* define array for test */
let a = [1, 2, 3, 4, 5];

/* define new variables y, z */
let [x, y] = a; // destructuring assignment

console.log(x); // 1
console.log(y); // 2</code></pre>

<p><b>Note: </b>You will learn more about destructuring after you learn about objects.</p>

<p><b>Example: swap</b></p>

<p>Swapping two values with destructuring syntax:</p>
<pre><code class="language-javascript">let a = 1, b = 3;
[a, b] = [b, a]; //swap

console.log("a = " + a);  // 3
console.log("b = " + b);  // 1
</code></pre>

<p><b>Example: skip</b></p>

<p>You can skip one or more values by using multiple comas without any variable, or by using anonymous variable "_" that is by convention not used for anything. So you can reuse same variable for missing values.</p>

<pre><code class="language-javascript">/* define array for test */
let a = [1, 2, 3, 4, 5];

/* define new variables x, y, z */
let [x, y,,,z] = a; // ignore two elements

/* expected results */
console.log(x); // 1
console.log(y); // 2
console.log(z); // 5

/* define new variables h, o */
let [h,_,o] = a; // ignore last elements

/* expected results */
console.log(h); // 1
console.log(o); // 3


</code></pre>

<p><b>Note:</b>&nbsp;You can do more with destructuring:&nbsp;
<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"
   target="_blank" rel="nofollow noopener noreferrer">MDN Destructuring</a></p>
<hr>

<h2><a id="object"/>Array as object</h2>
<p>JavaScript is difficult to understand when you migrate from C because its behavior is strange.
An array is not an enumeration of elements ordered by "index",
in fact is a disguised "associative array" with keys starting from "0"
to the maximum number of elements minus one.
However you can remove elements from an array and the index will have gaps if you do this.
You can even remove the first element and the array will not start with array[0].
This is because "associative array" is a generic structure used in JavaScript for all objects.</p>

<p><b>Don&rsquo;t believe me? Try this:</b></p>

<pre><code class="language-javascript">const array = [1,2,3];
console.log(typeof(array)); // object</code></pre>

<p><b>Note:&nbsp;</b>
The type &lsquo;array&rsquo; do not exist in JavaScript.
You have in fact declared an object here.</p>

<h2><a id="associative">Associative arrays</h2>

<p>To create a customized associative array in JavaScript we use JSON.
An associative array is an object similar to an array.
It has keys and values associated with the keys.
Each key is unique and can be integer or a string.</p>

<h4>Example:</h4>
<pre><code class="language-javascript">/* associative array */
var array = { 1:4, 2:5, 3:6 };
// read array values
for (x in array) {
 console.log(`array[${x}]= ${array[x]}`);
}
</code></pre>

<p><b>Output:</b></p>
<pre><code class="language-output">array[1]= 4
array[2]= 5
array[3]= 6
</code></pre>

<h3>Modify Associative Array</h3>
<p>You can add new elements in associative array using notation:
array[key] = value. If the key do not exist a new element will be created automatically.
To remove an element you can use "delete" statement.</p>

<h4>Example:</h4>

<pre><code class="language-javascript">/* associative array */
var array = { 1:4, 2:5, 3:6 };
// add a new element in array
array[4] = 7;
// remove an element from array
delete array[1];
console.log(array);
</code></pre>

<p><b>Output:</b></p>

<pre><code class="language-output">{2: 5 , 3: 6 , 4: 7}</code></pre>

<h3>String keys</h3>
<p>Instead of numbers you can use string keys.
These keys can have same convention as variables.
If you follow same convention, the elements of the associative array can be accessed with dot notation:</p>

<h4>Example:</h4>
<pre><code class="language-javascript">/* associative array */
let array = { "first":1, "second":2, "third":3 };
// access element value using object notation
let max = array.first; // 1
// access element value using [key] notation
if (max &lt; array["second"])
 max = array["second"]; // 2
if (max &lt; array["third"])
 max = array["third"]; // 3
console.log(max); //expect: 3
</code></pre>


<h2>Object methods</h2>
<p>The Object is the fundamental class for all objects in JavaScript,
therefore also "associative array" is responding to Object methods.
In the next examples I show you how to use some methods but you can look into reference manual and figure out the rest:</p>

<h4>Example:</h4>
<p>Reading [keys, value] entries:</p>

<pre><code class="language-javascript">/* associative array */
var array = { 1:4, 2:5, 3:6 };
// read array values
for (element of Object.entries(array)) {
 console.log(element);
}
</code></pre>

<p><b>Output:</b></p>
<pre><code class="language-output">["1" ,4]
["2" ,5]
["3" ,6]</code></pre>

<h4>Example:</h4>
<p>Reading [key,value] pairs using for&hellip;of loop:</p>

<pre><code class="language-javascript">/* associative array */
var array = { 1:4, 2:5, 3:6 };
// deconstruct pairs
for ([key,value] of Object.entries(array)) {
 console.log(key + "-&gt;" + value);
}
</code></pre>

<p><b>Output:</b></p>
<pre><code class="language-output">1-&gt;4
2-&gt;5
3-&gt;6
</code></pre>

<h4>Example:</h4>
<p>Reading keys and values in separated arrays:</p>
<pre><code class="language-javascript">/* associative array */
const array = { "first":1, "second":2, "third":3 };
// using Object functions:
console.log(Object.keys(array));
console.log(Object.values(array));
</code></pre>

<p><b>Output:</b></p>

<pre><code class="language-output">["first" ,"second" ,"third"]
[1 ,2 ,3]</code></pre>

<h2><a id="set"/>The set collection</h2>

<p>A mathematical set is a collection of unique items.
JavaScript&nbsp;<em>Set</em>&nbsp;is a collection of key-value pairs where key === value and key is unique.
You can convert an array into a&nbsp;<em>Set</em>&nbsp;and then duplicates are eliminated.</p>

<h4>Example:</h4>
<pre><code class="language-javascript">// array fixture
var array = [ 4, 5, 5, 6, 6];
// convert to set
var myset = new Set(array);
// elements of set are unique
for (element of myset) {
 console.log(element);
}
// convert back to array
var a = Array.from(myset)
console.log(a); // [4,5,6]
</code></pre>

<h3>Set methods</h3>
<p>You can create an empty Set then you can use methods to append data values to the set.
If you attempt to append same value twice, only one will be stored in the Set.
Of course you can verify if one value is in the set and you can remove values from the set.</p>

<pre><code class="language-javascript">/* empty Set */
let mySet = new Set();
/* add some elements */
mySet.add(1); // Set [1]
mySet.add(2); // Set [1, 2]
mySet.add(2); // Set [1, 2]
mySet.add(3); // Set [1, 2, 3]
console.log([...mySet]); // [1,2,3]
console.log('size='+mySet.size); // 3
/* remove one element */
mySet.delete(3);
console.log(mySet.has(3)) // false
console.log('size='+mySet.size); // 2
console.log([...mySet]); // [1,2]
</code></pre>

<p><b>Note:</b>&nbsp;There is a keyword: "set" that has nothing to do with "Set".
This is an unfortunate coincidence in English. Lowercase "set" is a "setter" method and not a collection.
Do not confuse the two and do not give name "set" to a "Set".</p>

<h2><a id="map"/>Map object</h2>
<p>The Map object holds key-value pairs very similar to an object.
Any value (both objects and primitive values) may be used as either a key or a value.
That was not possible with a normal object. A <em>map</em> may perform better than <em>object</em>
in scenarios involving frequent addition and removal of key pairs.</p>

<h4>Example:</h4>
<pre><code class="language-javascript">// create a Map
var map = new Map(
 [
 ["a", 1],
 ["b", 2],
 ["c", 3]
 ]);
// elements of map are unique
for ([key, value] of map) {
 console.log("key = "+ key + ", value = "+ value);
}
// convert back to array
console.log(Array.from(map));
</code></pre>

<h3>Map methods</h3>
<p>Map methods are very similar to Set methods.
Two methods are a little bit off. "set" and "get" methods, that are also keywords.
So JavaScript can do this (unfortunately) it is overwriting keyword meaning with methods.
Do not be mad, get used to JavaScript to break the rules from time to time.
Hell it is a free language, so you can&rsquo;t complain about it.</p>

<h4>Example:</h4>
<pre><code class="language-javascript">// create empty Map object
let myMap = new Map();
// prepare 3 keys
let keyString = 'a string'
let keyObj = {}
let keyFunc = function() {};
let keyArray = [1,2];
// setting the values
myMap.set(keyString, "key is a string");
myMap.set(keyObj, "key is object");
myMap.set(keyFunc, "key is a function");
myMap.set(keyArray, "key is a array");
// reading size of the map
console.log("Map size = " + myMap.size); // 4
// getting the values
console.log(myMap.get(keyString) );
console.log(myMap.get(keyObj) );
console.log(myMap.get(keyFunc) );
console.log(myMap.get(keyArray) );
</code></pre>

<p><b>Note:&nbsp;</b>
By now you already know that JavaScript is using objects for everything.
Map is also an object. When you define a new map you actually inherit methods from Map.prototype.
So this is what you need to look for to find all Map methods.</p>

<p><b>References:</b></p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object#Methods_of_the_Object_constructor">MDN Object Methods</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Methods">MDN Map Methods</a></li>
</ul>

<h2><a id="spread"/>Spread Operator:"..."</h2>
<p>Spread syntax allows an iterable such as an array expression or strings to be expanded.
It can be used in places where zero or more arguments or elements are expected,
Also can be used to expand objects in places where key-value pairs are expected.</p>

<h4>Example:</h4>

<pre><code class="language-javascript">// expect 3 arguments
function sum(x, y, z) {
 return x + y + z;
}
// spread array elements by position
const numbers = [1, 2, 3];
const result = sum(...numbers);
console.log(result) // expected output: 6
</code></pre>

<p><b>Spreading Arrays:</b></p>
<p>You can do other interesting stuff by using spread operator with arrays:</p>
<pre><code class="language-javascript">/* clone arrays */
var array = [1, 2, 3]; // fixture
var clone = [...array]; // spread elements
// test different arrays
clone[3] = 4;
console.log(clone); // [1, 2, 3, 4]
console.log(array); // [1, 2, 3]
/* concatenate arrays */
merge = [0, ...array, ...clone]
console.log(merge); // [0,1,2,3,1,2,3,4]
</code></pre>

<p><b>Spreading Object:</b></p>

<p>Spreading operator "..." can be used in object literals.
This enable you to combine elements from objects or send properties of an object as parameters for a function.</p>

<pre><code class="language-javascript">// define two objects
let obj1 = { foo: 'foo', x: 42 };
let obj2 = { foo: 'bar', y: 13 };
// clone all attributes of object
let clonedObj = { ...obj1 };
console.log(clonedObj) // Object { foo: "bar", x: 42 }
// on merge, properties can not be duplicate
let mergedObj = { ...obj1, ...obj2 };
console.log(mergedObj) // Object { foo: "foo", x: 42, y: 13 }
</code></pre>

<p><b>Variable arguments:</b></p>
<p>It is possible to define functions with variable number of arguments.
To call these functions you can use a larger or smaller list of arguments separated by comma.
In next example we use spreading operator "..." to feed a function that receive variable number of arguments:</p>

<h4>Example:</h4>
<pre><code class="language-javascript">// calculate median number (average)
function avg (...args) {
   let sum = 0;
   for (let n of args) {
   sum += n;
 }
 return sum/args.length;
}
// fixture (test data)
let data = [0,1,2,3,4,5,6,7,8,9,10];
// normal call (we can not use fixture)
let test = avg(0,1,2,3,4,5,6,7,8,9,10);
// call using spread operator and fixture:
let median = avg(...data); //spreading an array
// check if the test is successful
console.log(median == test); //expect true
</code></pre>

<h2><a id="rest">Rest syntax</h2>
<p>Rest syntax is the opposite of spread syntax: the "spread" expands an array into its elements,
while the "rest" collects multiple elements and condenses them into a single element.
The rest operator is the same as spread operator: "...", so it may be difficult to grasp.</p>

<h4>Example:</h4>
<pre><code class="language-javascript">// rest arguments
function test(a, b, ...more) {
   console.log("a = " + a);
   console.log("b = " + b);
   console.log(more);
}
// call function: a=1, b=2, more = [3, 4, 5]
test(1,2,3,4,5);
// call function: a="x", b="y", more = ["z"]
test("x","y","z");
</code></pre>

<p><b>Note:&nbsp;</b>Operator "&hellip;" is used in C for same purpose. It is called sometimes "varargs" or "variable arguments". A function can be designed to receive as the last argument the "rest of arguments".</p>
<h4>Example:</h4>
<p>The&nbsp;<em>rest syntax</em>&nbsp;can be used in combination with&nbsp;<em>decomposition assignment</em>.
Collecting the rest of elements can be done into target array or object.
The two are very different.
You should remember we have done this before when we have learned about objects:</p>

<pre><code class="language-javascript">// collect rest of elements
let [x,...rest] = [1,2,3,4,5];
console.log(rest); // [3,4,5];
// collect rest of attributes
let {a,...test} = {a: 1, b: 2, c: 3};
console.log(test); // {b: 2, c: 3};
</code></pre>

<hr>

<p><b>Read next:</b>
<a href="website.html">Website</a></p>

<!-- Footer -->
<footer class="footer">
  <div class="footer-copyright text-center"></div>
</footer>

</div>
</body>
</html>